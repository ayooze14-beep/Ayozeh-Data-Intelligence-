;/*FB_PKG_DELIM*/

__d("WAMapsShallowEqual",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n;if(e.size!==t.size)return!1;for(var r of e){var o=r[0],a=r[1];if(n=t.get(o),n!==a||n===void 0&&!t.has(o))return!1}return!0}i.default=e}),66);
__d("WAWebFirstPartyStickerInfo.react",["fbt","WAWebButton.react","WAWebCmd","WAWebFavoriteStickerAction","WAWebFavoriteStickerCollection","WAWebFlex.react","WAWebMiscGatingUtils","WAWebStickerDetailsStickerPackInfo.react","WAWebStickerPackCollectionMd","react","useWAWebEventTargetValue"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=r("react")),d=(e||(e=o("react"))).useEffect,m=150;function p(e){var t=e.stickerPackId,n=e.onStickerPackView,r=e.stickerPackViewDelay,a=e.sticker,i=e.showViewPackButton,l=_(t),u;if(t){var d=function(a){a.stopPropagation(),n&&n(),r!=null?self.setTimeout(function(){return o("WAWebCmd").Cmd.openStickerPack(t)},r+m):o("WAWebCmd").Cmd.openStickerPack(t)};o("WAWebMiscGatingUtils").isFavoriteStickersEnabled()?a!=null&&(u=c.jsxs(o("WAWebFlex.react").FlexRow,{gap:8,children:[i&&c.jsx(o("WAWebButton.react").Button,{onClick:d,type:"secondary",children:s._(/*BTDS*/"View Pack")}),o("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(a.filehash)?c.jsx(o("WAWebButton.react").Button,{onClick:function(){return o("WAWebFavoriteStickerAction").removeStickerFromFavorites(a)},type:"secondary",children:s._(/*BTDS*/"Remove From Favourites")}):c.jsx(o("WAWebButton.react").Button,{onClick:function(){return o("WAWebFavoriteStickerAction").addStickerToFavorites(a)},type:"secondary",children:s._(/*BTDS*/"Add to Favourites")})]})):u=i?c.jsx(o("WAWebButton.react").Button,{onClick:d,type:"secondary",children:s._(/*BTDS*/"View Pack")}):null}return c.jsxs(c.Fragment,{children:[c.jsx(o("WAWebStickerDetailsStickerPackInfo.react").StickerDetailsStickerPackInfo,{name:l==null?void 0:l.name,publisher:l==null?void 0:l.publisher,theme:o("WAWebStickerDetailsStickerPackInfo.react").Theme.MediaViewer}),u]})}p.displayName=p.name+" [from "+i.id+"]";function _(e){d(function(){e&&o("WAWebStickerPackCollectionMd").StickerPackCollectionMd.fetchStickerPack(e)},[e]);var t=r("useWAWebEventTargetValue")(o("WAWebStickerPackCollectionMd").StickerPackCollectionMd,"add remove reset",function(){return e!=null?o("WAWebStickerPackCollectionMd").StickerPackCollectionMd.get(e):null});return t}l.default=p}),226);
__d("WAWebMediaAudio.react",["fbt","WAWebMediaUrlProvider","WAWebPttAudioTag.react","WAWebUIRefreshGatingUtils","react","useWAWebModelValues"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react")),c=function(t){t.stopPropagation()};function d(e){var t=e.msg,n=e.url,a=o("WAWebUIRefreshGatingUtils").checkIfShouldBeEnabledInWindowsEnv()?s._(/*BTDS*/"Audio playback is not supported on this device."):s._(/*BTDS*/"Your browser doesn't support audio playback.");return u.jsx(r("WAWebPttAudioTag.react"),{url:n,className:"xh8yej3 xqolr7f x1anomrk",onClick:c,autoPlay:!0,msg:t,controls:!0,testId:"media-audio",children:a})}d.displayName=d.name+" [from "+i.id+"]";function m(){return u.jsx("div",{className:"xzkaem6 xdzyupr x1vd4hg5 xx5krr6 xztyhrg x18d0r48",onClick:c})}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t=e.mediaData,n=e.msg,a=o("useWAWebModelValues").useModelValues(t,["mediaStage","renderableUrl"]);return u.jsx(r("WAWebMediaUrlProvider"),{mediaData:a,placeholderRenderer:m,children:function(t){return u.jsx(d,{url:t,msg:n})}})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),226);
__d("WAWebMediaViewerFlow.react",["Keys","Promise","WALogger","WANullthrows","WAWebAllMediaCollection","WAWebCarouselMsgUtils","WAWebChatMedia","WAWebFrontendConstants","WAWebFrontendMsgGetters","WAWebL10N","WAWebMediaIncrementalZoom","WAWebMediaTypes","WAWebMediaViewerModal.react","WAWebMiscGatingUtils","WAWebModalManager","WAWebMsgGetters","WAWebMsgType","WAWebSuspendedGroupUtils","WAWebThumbList.react","WAWebUiActionWamEvent","WAWebVelocityAnimate","WAWebWamEnumUiActionType","WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE","WAWebWamMsgUtils","WAWebWamPrivateStatsUtils","asyncToGeneratorRuntime","react","useLazyRef","useWAWebForceUpdate","useWAWebListener","useWAWebPrevious","useWAWebStableCallback","useWAWebThrottledCallback","useWAWebUiIdle","useWAWebUnmountSignal"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m=d||(d=o("react")),p=c||(c=r("react")),_=m.useCallback,f=m.useEffect,g=m.useRef,h=m.useState,y=p.createContext(!1),C={duration:300,delay:100,easing:[.1,.82,.25,1]},b=function(t){var e=t.direction,n=[1,0],r=["0%","100%"];return e==="down"&&(n.reverse(),r.reverse()),{opacity:n,translateY:r}},v=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.el,n=e.direction;if(t)return r("WAWebVelocityAnimate")(t,b({direction:n}),C)});return function(n){return e.apply(this,arguments)}})();function S(t){"use no forget";var a,i,l,c=t.msg,d=t.highlightedMsgIds,m=t.shouldShowAllMedia,C=r("useWAWebUnmountSignal")(),b=r("useWAWebUiIdle")(),S=o("useWAWebForceUpdate").useForceUpdateDONOTUSE(),L=o("WAWebFrontendMsgGetters").getChat(c),E=!!((a=L.groupMetadata)!=null&&a.isLidAddressingMode),k=o("WAWebWamMsgUtils").msgIsLid(c,L.id,E),I=r("useLazyRef")(function(){return c.type===o("WAWebMsgType").MSG_TYPE.IMAGE?new(o("WAWebUiActionWamEvent")).UiActionWamEvent({uiActionType:o("WAWebWamEnumUiActionType").UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:c.mediaData.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED,isLid:k}):null}),T=r("useLazyRef")(function(){var e=c;if(c.isCarouselCard){var t;e=(t=o("WAWebCarouselMsgUtils").getParentMsgFromCarouselCard(c))!=null?t:c}return o("WAWebChatMedia").constructMediaMsgs(o("WAWebFrontendMsgGetters").getChat(e),e)}),D=m===!0?o("WAWebAllMediaCollection").AllMediaCollection:null,x=T.current.length,$=r("useWAWebPrevious")(x),P=g(null),N=g(),M=g(),w=g(null),A=g(null),F=g(null),O=h(c),B=O[0],W=O[1],q=h(!1),U=q[0],V=q[1],H=h(R(B)),G=H[0],z=H[1],j=r("useWAWebPrevious")(B),K=function(t){t===void 0&&(t=!1);var e=A.current,n=F.current,o=w.current;if(!(!e||!n||!o)){var a=0;o instanceof HTMLElement&&(a=o.clientWidth/2-e.clientWidth/2),r("WAWebVelocityAnimate")(n,"stop");var i=0;t&&(i=300),r("WAWebVelocityAnimate")(o,"scroll",{duration:i,container:n,offset:a,axis:"x",easing:[.1,.82,.25,1]})}};f(function(){var e=function(t){t&&r("WAWebVelocityAnimate")(t,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then(function(){C.aborted||z(!1)})};K(),R(c)&&e(A.current)},[]),f(function(){x>($!=null?$:0)&&K()},void 0);var Q=_(function(e){b(function(){T.current.loadMoreAroundIfNeeded(e)}),W(e)},[T,b]),X=function(){var e=-1;if(!d||!B)return e;var t=B.id.toString();if(!d.has(t))return e;var n=0;return d.forEach(function(r){r===t&&(e=n),n++}),e},Y=function(n){var t,r=D!=null?D:T.current;if(n&&n.stopPropagation(),!U){var a=B;if(a){var i=null;if(i=r.getAfter(a),i){Q(i);return}T.current.hasMediaAfter&&(N.current||(N.current=(t=T.current.queryMedia({chat:o("WAWebFrontendMsgGetters").getChat(c),msg:c,direction:"after"}))==null?void 0:t.then(function(e){C.aborted||typeof(e==null?void 0:e.length)=="number"&&e.length>0&&B===c&&Y()}).catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["query media msgs error: "]))).devConsole(t)}).finally(function(){N.current=null})))}}},J=function(t){var e,n=D!=null?D:T.current;if(t&&t.stopPropagation(),!U){var r=B;if(r){var a=null;if(a=n.getBefore(r),a){Q(a);return}T.current.hasMediaBefore&&(M.current||(M.current=(e=T.current.queryMedia({chat:o("WAWebFrontendMsgGetters").getChat(c),msg:c,direction:"before"}))==null?void 0:e.then(function(e){C.aborted||typeof(e==null?void 0:e.length)=="number"&&e.length>0&&B===c&&J()}).catch(function(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["query media msgs error: "]))).devConsole(e)}).finally(function(){M.current=null})))}}},Z=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!e.defaultPrevented&&!(B&&!R(B))){var t=yield new(u||(u=n("Promise")))(function(e){o("WAWebModalManager").ModalManager.exists(e)});if(!(t&&D==null)){var a=r("WAWebL10N").isRTL();e.keyCode===r("Keys").LEFT?a?Y():J():e.keyCode===r("Keys").RIGHT&&(a?J():Y())}}});return function(n){return e.apply(this,arguments)}})(),ee=null;c.type===o("WAWebMsgType").MSG_TYPE.IMAGE&&(ee=function(){var e=I.current;if(e){var t,n=o("WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE").getGroupCountMetricsFromChatWid((t=o("WAWebFrontendMsgGetters").getChat(c))==null?void 0:t.id);n!=null&&e.set(n),e.markUiActionT(),e.commit(),I.current=null}o("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents()});var te=function(t){V(t)},ne=function(){o("WAWebModalManager").ModalManager.closeMedia()},re=function(){var e=function(t){t&&r("WAWebVelocityAnimate")(t,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})};R(c)&&e(A.current)},oe=function(){R(c)&&v({el:A.current,direction:"up"})},ae=function(){R(c)&&v({el:A.current,direction:"down"})},ie=r("useWAWebStableCallback")(function(){W(null),ne()});o("useWAWebListener").useListener(R(B)?null:B,"revoked",ie);var le=R(B)?T.current:null;o("useWAWebListener").useListener(le,"remove",function(e,t,n){var o=T.current,a=B;if(o.includes(e)||a!=null&&a.id!=null&&a.id.toString()!==e.id.toString()){S();return}var i=n.index;o.length===0?ne():o.length===i?Q(r("WANullthrows")(o.at(i-1))):Q(r("WANullthrows")(o.at(i)))}),o("useWAWebListener").useListener(le,"reset",function(){ne()}),o("useWAWebListener").useListener(le,"query_media_after",function(){S()}),o("useWAWebListener").useListener(le,"query_media_before",function(){var e=F.current;e&&(P.current=e.scrollWidth,e instanceof HTMLElement&&S())}),o("useWAWebListener").useListener(window,"keydown",Z),f(function(){b(function(){B&&T.current.loadMoreAroundIfNeeded(B)})},[B,T,b]),f(function(){if(j!==B)K(!0);else{var e=F.current;if(!e||P.current==null||P.current===0)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-P.current),P.current=null}},[B,j]);var se=function(t,n,a){if(n.length!==0&&a!=null){if(n.hasMediaBefore&&a<t.clientWidth){var e=r("WANullthrows")(n.head());b(function(){n.queryMedia({chat:o("WAWebFrontendMsgGetters").getChat(e),msg:e}),S()})}if(n.hasMediaAfter&&a+o("WAWebFrontendConstants").SCROLL_FUDGE>t.scrollWidth-2*t.clientWidth){var i=r("WANullthrows")(n.last());b(function(){n.queryMedia({chat:o("WAWebFrontendMsgGetters").getChat(i),msg:i,direction:"after"}),S()})}}},ue=r("useWAWebThrottledCallback")(se,100),ce=function(t){ue(t.currentTarget,T.current,t.currentTarget.scrollLeft)},de=_(function(e){w.current=e},[]);if(!B)return null;if(!o("WAWebMsgGetters").getIsNewsletterMsg(c)&&o("WAWebFrontendMsgGetters").getChat(c).isSuspendedOrTerminated()&&o("WAWebMiscGatingUtils").isGroupSuspendV2Enabled()){o("WAWebSuspendedGroupUtils").openSuspendedGroupMediaDownloadFailureModal();return}var me=T.current,pe=D!=null?D:T.current,_e=pe.last(),fe=me.hasMediaAfter||B!==_e?Y:null,ge=pe.head(),he=me.hasMediaBefore||B!==ge?J:null;return p.jsx(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtxProvider,{activeMsg:B,children:p.jsx(y.Provider,{value:U,children:p.jsxs("div",{className:U?"img-zoomed-in":null,children:[p.jsx(r("WAWebMediaViewerModal.react"),{msg:B,mediaData:B.mediaData,onBack:ne,onExitAnimation:re,onNext:fe,onPrev:he,onImgZoomIn:te,getZoomNode:t.getZoomNode,startTime:t.startTime,isAnimatingThumbs:G,onImageLoad:ee,msgIndexInAlbum:X(),albumSize:((i=t.highlightedMsgIds)==null?void 0:i.size)||0,shouldShowNumberText:(l=t.shouldShowNumberText)!=null?l:!1,shouldShowAllMedia:m}),o("WAWebMsgGetters").getHasThumbList(B)&&p.jsx(r("WAWebThumbList.react"),{activeMsg:B,mediaMsgs:D!=null?D:T.current,highlightedMsgIds:t.highlightedMsgIds,onSelectThumb:Q,onSetActiveThumb:de,onScroll:ce,setRefThumbsContainer:function(t){A.current=t},setRefThumbs:function(t){F.current=t},moveUpAnimation:oe,moveDownAnimation:ae})]})})})}S.displayName=S.name+" [from "+i.id+"]";function R(e){return e?o("WAWebMsgGetters").getHasThumbList(e):!0}l.MediaViewerFlowZoomContext=y,l.MediaViewerFlow=S}),98);
__d("WAWebMediaPanelHeaderTestIds",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({CLOSE_BUTTON:"media-panel-header-close-button",DELETE_BUTTON:"media-panel-header-delete-button",DOWNLOAD_BUTTON:"media-panel-header-download-button",FORWARD_BUTTON:"media-panel-header-forward-button",GO_TO_MESSAGE_BUTTON:"media-panel-header-go-to-message-button",KEEP_BUTTON:"media-panel-header-keep-button",MORE_MENU_BUTTON:"media-panel-header-more-menu-button",PIN_BUTTON:"media-panel-header-pin-button",REACTIONS_BUTTON:"media-panel-header-reactions-button",REPLY_BUTTON:"media-panel-header-reply-button",STAR_BUTTON:"media-panel-header-star-button",UNKEEP_BUTTON:"media-panel-header-unkeep-button",UNPIN_BUTTON:"media-panel-header-unpin-button",UNSTAR_BUTTON:"media-panel-header-unstar-button"}),l=e;i.default=l}),66);
__d("WAWebMediaViewerReportSpamPopupLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","WAWebLoadingDrawer.react","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebMediaViewerReportSpamPopup.react").__setRef("WAWebMediaViewerReportSpamPopupLoadable").load();return e}),"WAWebMediaViewerReportSpamPopup"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(r("WAWebLoadingDrawer.react"),{error:!!t.error})}});l.WAWebMediaViewerReportSpamPopupLoadable=c}),98);
__d("WAWebReportNewsletterPostSpamButton.react",["fbt","WAWebDropdownItem.react","WAWebFrontendMsgGetters","WAWebModalManager","WAWebReportNewsletterPostPopup.react","WAWebSpamConstants","WAWebThumbsDownRefreshedIcon.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.msg,n=o("WAWebFrontendMsgGetters").getChat(t),a=function(){o("WAWebModalManager").ModalManager.open(u.jsx(r("WAWebReportNewsletterPostPopup.react"),{chat:n,msg:t,spamFlow:o("WAWebSpamConstants").SpamFlow.MediaViewer}))};return u.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:a,icon:u.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),children:s._(/*BTDS*/"Report")})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("WAWebSearchTheWebButton.react",["WAWebDropdownItem.react","WAWebModalManager","WAWebSearchRefreshedIcon.react","WAWebSearchTheWebCommonUtils","WAWebSearchTheWebEventLogger","WAWebWamEnumStwInteraction","WAWebWebSearchPopup.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.msg,n=e.entryPoint,a=e.stwFormat,i=e.messageType,l=function(){o("WAWebSearchTheWebEventLogger").logSTWEvent({stwEntryPoint:n,stwFormat:a,stwInteraction:o("WAWebWamEnumStwInteraction").STW_INTERACTION.ENTRY_POINT_CLICKED,messageType:i}),o("WAWebModalManager").ModalManager.open(s.jsx(r("WAWebWebSearchPopup.react"),{message:t,entryPoint:n,stwFormat:a}))};return s.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:l,icon:s.jsx(o("WAWebSearchRefreshedIcon.react").SearchRefreshedIcon,{}),children:o("WAWebSearchTheWebCommonUtils").getHFMHeaderCTAText()})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("WAWebSendForAdminReviewButton.react",["fbt","WAWebDropdownItem.react","WAWebFrontendMsgGetters","WAWebModalManager","WAWebReportToAdminEventsLogger","WAWebReportToAdminPopup.react","WAWebThumbsDownRefreshedIcon.react","WAWebWamEnumReportToAdminInteraction","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.msg,n=function(){o("WAWebReportToAdminEventsLogger").logRTAReportingEvent({reportToAdminInteraction:o("WAWebWamEnumReportToAdminInteraction").REPORT_TO_ADMIN_INTERACTION.CLICK_SEND_FOR_ADMIN_REVIEW,groupId:o("WAWebFrontendMsgGetters").getChat(t).id.user}),o("WAWebModalManager").ModalManager.open(u.jsx(r("WAWebReportToAdminPopup.react"),{msg:t}))};return u.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:n,icon:u.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),children:s._(/*BTDS*/"Send for admin review")})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("WDSIconIcBookmark.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-bookmark";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M12 18L7.8 19.8C7.13333 20.0833 6.5 20.0292 5.9 19.6375C5.3 19.2458 5 18.6917 5 17.975V5C5 4.45 5.19583 3.97917 5.5875 3.5875C5.97917 3.19583 6.45 3 7 3H17C17.55 3 18.0208 3.19583 18.4125 3.5875C18.8042 3.97917 19 4.45 19 5V17.975C19 18.6917 18.7 19.2458 18.1 19.6375C17.5 20.0292 16.8667 20.0833 16.2 19.8L12 18ZM12 15.8L17 17.95V5H7V17.95L12 15.8Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSIconIcPushPin.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-push-pin";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M16 5V12L17.7 13.7C17.8 13.8 17.875 13.9125 17.925 14.0375C17.975 14.1625 18 14.2917 18 14.425V15C18 15.2833 17.9042 15.5208 17.7125 15.7125C17.5208 15.9042 17.2833 16 17 16H13V21.85C13 22.1333 12.9042 22.3708 12.7125 22.5625C12.5208 22.7542 12.2833 22.85 12 22.85C11.7167 22.85 11.4792 22.7542 11.2875 22.5625C11.0958 22.3708 11 22.1333 11 21.85V16H7C6.71667 16 6.47917 15.9042 6.2875 15.7125C6.09583 15.5208 6 15.2833 6 15V14.425C6 14.2917 6.025 14.1625 6.075 14.0375C6.125 13.9125 6.2 13.8 6.3 13.7L8 12V5C7.71667 5 7.47917 4.90417 7.2875 4.7125C7.09583 4.52083 7 4.28333 7 4C7 3.71667 7.09583 3.47917 7.2875 3.2875C7.47917 3.09583 7.71667 3 8 3H16C16.2833 3 16.5208 3.09583 16.7125 3.2875C16.9042 3.47917 17 3.71667 17 4C17 4.28333 16.9042 4.52083 16.7125 4.7125C16.5208 4.90417 16.2833 5 16 5ZM8.85 14H15.15L14 12.85V5H10V12.85L8.85 14Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSIconIcReply.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-reply";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M6.82502 12L9.72502 14.9C9.92502 15.1 10.0209 15.3333 10.0125 15.6C10.0042 15.8667 9.90002 16.1 9.70002 16.3C9.50002 16.4833 9.26669 16.5792 9.00002 16.5875C8.73336 16.5958 8.50002 16.5 8.30002 16.3L3.70002 11.7C3.50002 11.5 3.40002 11.2667 3.40002 11C3.40002 10.7333 3.50002 10.5 3.70002 10.3L8.30002 5.69999C8.48336 5.51665 8.71252 5.42499 8.98752 5.42499C9.26252 5.42499 9.50002 5.51665 9.70002 5.69999C9.90002 5.89999 10 6.13749 10 6.41249C10 6.68749 9.90002 6.92499 9.70002 7.12499L6.82502 9.99999H16C17.3834 9.99999 18.5625 10.4875 19.5375 11.4625C20.5125 12.4375 21 13.6167 21 15V18C21 18.2833 20.9042 18.5208 20.7125 18.7125C20.5209 18.9042 20.2834 19 20 19C19.7167 19 19.4792 18.9042 19.2875 18.7125C19.0959 18.5208 19 18.2833 19 18V15C19 14.1667 18.7084 13.4583 18.125 12.875C17.5417 12.2917 16.8334 12 16 12H6.82502Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSIconWdsIcBookmarkSlash.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="wds-ic-bookmark-slash";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M17 5V13.5859L19 15.5859V5C19 3.89543 18.1046 3 17 3H7C6.8208 3 6.6471 3.02357 6.48184 3.06778L8.41406 5H17Z",fill:"currentColor"}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6.41421V18C5 19.4149 6.42905 20.3824 7.74278 19.857L12 18.1541L16.2572 19.857C16.9442 20.1317 17.6627 19.9983 18.1919 19.6061L19.2929 20.7071C19.6834 21.0976 20.3166 21.0976 20.7071 20.7071C21.0976 20.3166 21.0976 19.6834 20.7071 19.2929L4.70711 3.29289C4.31658 2.90237 3.68342 2.90237 3.29289 3.29289C2.90237 3.68342 2.90237 4.31658 3.29289 4.70711L5 6.41421ZM7 8.41421L16.3096 17.7239L12 16L7 18V8.41421Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSIconWdsIcGradeSlash.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="wds-ic-grade-slash";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.70708 3.29289C4.31655 2.90237 3.68339 2.90237 3.29286 3.29289C2.90234 3.68342 2.90234 4.31658 3.29286 4.70711L7.83157 9.24581L4.34998 9.5509C4.11665 9.58423 3.93332 9.65923 3.79998 9.7759C3.66665 9.89257 3.56665 10.0426 3.49998 10.2259C3.43332 10.4092 3.42082 10.5967 3.46248 10.7884C3.50415 10.9801 3.60832 11.1509 3.77498 11.3009L7.44998 14.4759L6.34998 19.2009C6.29998 19.4176 6.31665 19.6134 6.39998 19.7884C6.48332 19.9634 6.59998 20.1092 6.74998 20.2259C6.89998 20.3426 7.07498 20.4092 7.27498 20.4259C7.47498 20.4426 7.66665 20.3926 7.84998 20.2759L12 17.7759L16.15 20.2759C16.3333 20.3926 16.525 20.4426 16.725 20.4259C16.925 20.4092 17.1 20.3426 17.25 20.2259C17.4 20.1092 17.5167 19.9634 17.6 19.7884C17.6833 19.6134 17.7 19.4176 17.65 19.2009L17.6085 19.0228L19.2929 20.7071C19.6834 21.0976 20.3166 21.0976 20.7071 20.7071C21.0976 20.3166 21.0976 19.6834 20.7071 19.2929L4.70708 3.29289ZM14.9161 16.3304L9.66542 11.0797L6.89998 11.3259L9.67498 13.7509L8.84998 17.3259L12 15.4259L15.15 17.3509L14.9161 16.3304Z",fill:"currentColor"}),c.jsx("path",{d:"M12 7.6259L12.7138 9.29976L14.5367 11.1227L17.1 11.3509L15.8479 12.4338L17.2689 13.8548L20.225 11.3009C20.3917 11.1509 20.4958 10.9801 20.5375 10.7884C20.5792 10.5967 20.5667 10.4092 20.5 10.2259C20.4333 10.0426 20.3333 9.89257 20.2 9.7759C20.0667 9.65923 19.8833 9.58423 19.65 9.5509L14.8 9.1259L12.925 4.6759C12.8417 4.4759 12.7125 4.3259 12.5375 4.2259C12.3625 4.1259 12.1833 4.0759 12 4.0759C11.8167 4.0759 11.6375 4.1259 11.4625 4.2259C11.2875 4.3259 11.1583 4.4759 11.075 4.6759L10.1901 6.77602L11.7115 8.29741L12 7.6259Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSIconWdsIcPushPinSlash.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="wds-ic-push-pin-slash";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M14.7125 4H10.7125V6.175L7.96251 3.425C7.87917 3.34167 7.81667 3.25 7.77501 3.15C7.73334 3.05 7.71251 2.95 7.71251 2.85C7.71251 2.63333 7.78751 2.4375 7.93751 2.2625C8.08751 2.0875 8.28751 2 8.53751 2H16.7125C16.9958 2 17.2333 2.09583 17.425 2.2875C17.6167 2.47917 17.7125 2.71667 17.7125 3C17.7125 3.26667 17.5917 3.45417 17.35 3.5625C17.1083 3.67083 16.8958 3.81667 16.7125 4V10C16.7125 10.2833 16.6167 10.5208 16.425 10.7125C16.2333 10.9042 15.9958 11 15.7125 11C15.4292 11 15.1917 10.9042 15 10.7125C14.8083 10.5208 14.7125 10.2833 14.7125 10V4ZM11.7125 21V15H8.11251C7.69584 15 7.36251 14.8542 7.11251 14.5625C6.86251 14.2708 6.73751 13.9417 6.73751 13.575C6.73751 13.3917 6.77501 13.2083 6.85001 13.025C6.92501 12.8417 7.04584 12.6667 7.21251 12.5L8.71251 11V9.85L2.81251 3.9C2.62917 3.71667 2.53334 3.4875 2.52501 3.2125C2.51667 2.9375 2.61251 2.7 2.81251 2.5C2.99584 2.31667 3.22917 2.225 3.5125 2.225C3.79584 2.225 4.02917 2.31667 4.21251 2.5L21.1875 19.475C21.3875 19.675 21.4833 19.9125 21.475 20.1875C21.4667 20.4625 21.3625 20.7 21.1625 20.9C20.9625 21.0833 20.7292 21.1792 20.4625 21.1875C20.1958 21.1958 19.9625 21.1 19.7625 20.9L13.8625 15H13.7125V21C13.7125 21.2833 13.6167 21.5208 13.425 21.7125C13.2333 21.9042 12.9958 22 12.7125 22C12.4292 22 12.1917 21.9042 12 21.7125C11.8083 21.5208 11.7125 21.2833 11.7125 21ZM9.56251 13H11.8625L10.7625 11.9L10.7125 11.85L9.56251 13Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WAWebMediaPanelHeader.react",["fbt","$InternalEnum","WALogger","WAPromiseDelays","WAWebCellFrame.react","WAWebChatGetters","WAWebChatMessageSearch","WAWebChatRefreshedIcon.react","WAWebClock","WAWebCmd","WAWebColumnChangeDispatch","WAWebCommentsModal.react","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebCopyToClipboard","WAWebDebugGatingUtils","WAWebDeleteRevokeMsgFlow.react","WAWebDetailImage.react","WAWebDevOnlyBadge.react","WAWebDrawerManager","WAWebDrawerManagerContext","WAWebDropdown.react","WAWebDropdownItem.react","WAWebDropdownItemSeparator.react","WAWebEmojiText.react","WAWebEnvironment","WAWebFbtCommon","WAWebFileSaver","WAWebFlex.react","WAWebForwardMessageModalLoadable","WAWebFrontendChatGetters","WAWebFrontendMsgGetters","WAWebIcCloseIcon.react","WAWebIcDownloadIcon.react","WAWebIcShareWindowsIcon.react","WAWebInfoRefreshedIcon.react","WAWebKeepInChatActions","WAWebLaunchIcon.react","WAWebMediaDocumentUtils","WAWebMediaIncrementalZoom","WAWebMediaPanelHeader.styles","WAWebMediaPanelHeaderTestIds","WAWebMediaTypes","WAWebMediaViewerConstants","WAWebMediaViewerFlow.react","WAWebMediaViewerReportSpamPopupLoadable","WAWebMenuBar.react","WAWebMessageAssociation.flow","WAWebMessageMeta.react","WAWebModalManager","WAWebMsgActionCapability","WAWebMsgGetters","WAWebMsgReply","WAWebMsgType","WAWebMsgViewCount","WAWebNewsletterGatingUtils","WAWebNewsletterMembershipUtil","WAWebPinInChatCollection","WAWebPinMessageModal.react","WAWebPinnedMessagesUserJourneyLogger","WAWebProtobufsE2E.pb","WAWebReactionUserJourneyLogger","WAWebReactionsPanel.react","WAWebReactionsUtils","WAWebReplyPrivatelyRefreshedIcon.react","WAWebReplyToMsgChatAction","WAWebReportGatingUtils","WAWebReportNewsletterPostSpamButton.react","WAWebRevokeMetricUtils","WAWebSearchTheWebButton.react","WAWebSearchTheWebCommonUtils","WAWebSearchTheWebEventLogger","WAWebSendForAdminReviewButton.react","WAWebSendPinMessageAction","WAWebSendReactionMsgAction","WAWebSendReactionsTray.react","WAWebSendReactionsTrayContainer.react","WAWebSendSpamChatAction","WAWebSpamConstants","WAWebStateUtils","WAWebTPPdfViewerGatingUtils","WAWebThumbsDownRefreshedIcon.react","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebWamEnumKicEntryPointType","WAWebWamEnumReactionUserJourneyEntryPoint","WAWebWamEnumStwEntryPoint","WAWebWamEnumStwInteraction","WDSIconIcArrowForward.react","WDSIconIcBookmark.react","WDSIconIcDelete.react","WDSIconIcForward.react","WDSIconIcGrade.react","WDSIconIcMood.react","WDSIconIcMoreVert.react","WDSIconIcOpenInNew.react","WDSIconIcPushPin.react","WDSIconIcReply.react","WDSIconWdsIcBookmarkSlash.react","WDSIconWdsIcGradeSlash.react","WDSIconWdsIcPushPinSlash.react","WDSIconWdsIcViewOnce.react","WDSMenuBarItem.react","cr:13786","cr:23046","cr:7565","react","requireDeferred","stylex","useWAWebIsPinnedMsg","useWAWebListener","useWAWebModelValues","useWAWebMsgValues","useWAWebStableCallback"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m,p,_,f,g,h,y=h||(h=o("react")),C=f||(f=r("react")),b=y.useContext,v=y.useRef,S=y.useState,R=r("requireDeferred")("WAWebAusOSAReportModalTrigger").__setRef("WAWebMediaPanelHeader.react"),L=n("$InternalEnum").Mirrored(["MenuBar","Dropdown"]);function E(e){var t=o("WAWebFrontendMsgGetters").getChat(e);o("WAWebFrontendChatGetters").getIsCAG(t)?o("WAWebModalManager").ModalManager.open(C.jsx(r("WAWebCommentsModal.react"),{parentMsgs:[e]})):(t.composeQuotedMsg=e,o("WAWebComposeBoxActions").ComposeBoxActions.focus(t))}function k(e){return s._(/*BTDS*/"Report {contact_name}",[s._param("contact_name",e.displayName())])}k.displayName=k.name+" [from "+i.id+"]";function I(e){return o("WAWebMsgGetters").getIsSentByMe(e)||o("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(o("WAWebFrontendMsgGetters").getChat(e).newsletterMetadata)}function T(t){var n,a=t.msg,i=t.onHightlightCloseEnd,l=t.msgIndexInAlbum,s=t.onViewOnceInfoClick,c=t.onClose,d=t.theme,m=d===void 0?"default":d,p=v(null),_=o("useWAWebMsgValues").useMsgValues(t.msg.id,[o("WAWebMsgGetters").getId,o("WAWebMsgGetters").getStar,o("WAWebMsgGetters").getType,o("WAWebMsgGetters").getIsGif,o("WAWebMsgGetters").getIsViewOnce,o("WAWebMsgGetters").getSender,o("WAWebFrontendMsgGetters").getSenderObj,o("WAWebMsgGetters").getT,o("WAWebMsgGetters").getIsSentByMe,o("WAWebMsgGetters").getIsStickerMsg,o("WAWebMsgGetters").getBroadcastId,o("WAWebFrontendMsgGetters").getIsUnsentMedia,o("WAWebMsgGetters").getIsKept,o("WAWebMsgGetters").getMessageSecret,o("WAWebMsgGetters").getIsCarouselCard]),f=_[0],h=_[1],y=_[2],R=_[3],L=_[4],E=_[5],k=_[6],I=_[7],T=_[8],D=_[9],x=_[10],$=_[11],P=_[12],N=_[13],M=_[14],w=o("WAWebMsgViewCount").useWAWebLocalizedViewCount(a.id),A=o("WAWebFrontendMsgGetters").getChat(a),F=o("useWAWebModelValues").useModelValues(t.mediaData,["filehash","mediaStage","renderableUrl","filename","mimetype"]),O=S(null),B=O[0],W=O[1],q=S(null),U=q[0],V=q[1],H=v(null),G=v(!1),z=function(){W(null),G.current||o("WAWebReactionUserJourneyLogger").ReactionUserJourneyLogger.trayClose()},K=function(){V(null),o("WAWebReactionUserJourneyLogger").ReactionUserJourneyLogger.trayClose(),G.current=!1},Q=r("useWAWebStableCallback")(function(t){if(o("WAWebReactionsUtils").canReactToMessage(t)){var n=function(r){o("WAWebReactionUserJourneyLogger").ReactionUserJourneyLogger.reactionSelect(r),o("WAWebSendReactionMsgAction").sendReactionToMsg(t,r).catch(function(t){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendReactionMsg picker: error ",""])),t)}),K()};V({dirY:o("WAWebDropdown.react").DirY.BOTTOM,dirX:o("WAWebDropdown.react").DirX.CENTER,type:o("WAWebDropdown.react").MenuType.ReactionPicker,menu:C.jsx(r("WAWebReactionsPanel.react"),{msgId:t.id.toString(),onSelection:n}),flipOnRTL:!0,anchor:H.current})}}),X=function(){if(o("WAWebReactionsUtils").canReactToMessage(a)){var e=function(t){G.current=t===o("WAWebSendReactionsTray.react").MORE_REACTIONS,t!==o("WAWebSendReactionsTray.react").MORE_REACTIONS?(o("WAWebReactionUserJourneyLogger").ReactionUserJourneyLogger.reactionSelect(t),o("WAWebSendReactionMsgAction").sendReactionToMsg(a,t).catch(function(e){o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["sendReactionMsg: error sending from media modal ",""])),e)})):self.setTimeout(function(){Q(a)},150),z()},t={dirY:o("WAWebDropdown.react").DirY.BOTTOM,dirX:o("WAWebDropdown.react").DirX.CENTER,type:o("WAWebDropdown.react").MenuType.ReactionSendTray,menu:C.jsx(o("WAWebSendReactionsTrayContainer.react").SendReactionsTrayContainer,{msg:a,selectedCallback:e,userJourneyEntryPoint:o("WAWebWamEnumReactionUserJourneyEntryPoint").REACTION_USER_JOURNEY_ENTRY_POINT.MEDIA_VIEWER_REACTION_CTA}),flipOnRTL:!1,anchor:H.current};W(t)}};o("useWAWebListener").useListener(p.current,"animationend",function(){i()});var Y=a.displayName({showShortName:!0,withPushName:!0}),J=function(){return L||!o("WAWebMsgActionCapability").canDownloadMsg(a)?!1:!!F.renderableUrl||F.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED},Z=function(){return C.jsx(o("WAWebIcCloseIcon.react").IcCloseIcon,{xstyle:t.isHighlightClose?r("WAWebMediaPanelHeader.styles").highlightClose:{},containerRef:p})},ee;B?ee=C.jsx(o("WAWebUimUie.react").UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:z,children:C.jsx(r("WAWebUimUieMenu.react"),{contextMenu:B})}):U&&(ee=C.jsx(o("WAWebUimUie.react").UIE,{displayName:"MsgReactionPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:K,children:C.jsx(r("WAWebUimUieMenu.react"),{contextMenu:U})}));var te=o("WAWebNewsletterGatingUtils").isNewsletterViewCountEnabled(A==null||(n=A.newsletterMetadata)==null?void 0:n.membershipType)&&w!=null?C.jsxs(o("WAWebFlex.react").FlexRow,{className:(g||(g=r("stylex")))(r("WAWebMediaPanelHeader.styles").viewCount),children:[o("WAWebClock").Clock.relativeDateAndTimeStr(I),C.jsx(o("WAWebMessageMeta.react").MetaBullet,{}),C.jsx("span",{children:w})]}):C.jsx(C.Fragment,{children:o("WAWebClock").Clock.relativeDateAndTimeStr(I)}),ne=o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(F.mimetype)?C.jsxs(o("WAWebFlex.react").FlexRow,{children:[C.jsx(o("WAWebEmojiText.react").EmojiText,{className:(g||(g=r("stylex")))(r("WAWebMediaPanelHeader.styles").author),ellipsify:!0,text:Y}),C.jsx("div",{className:(g||(g=r("stylex")))(r("WAWebMediaPanelHeader.styles").dot),children:"\xB7"}),C.jsx(o("WAWebEmojiText.react").EmojiText,{className:(g||(g=r("stylex")))(r("WAWebMediaPanelHeader.styles").filename),ellipsify:!0,text:F.filename})]}):C.jsx(o("WAWebEmojiText.react").EmojiText,{ellipsify:!0,text:Y}),re=b(o("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext),oe=b(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx).isEnabled,ae=!oe&&re;return C.jsxs("div",babelHelpers.extends({},(g||(g=r("stylex"))).props(r("WAWebMediaPanelHeader.styles").mediaPanelHeader,ae&&r("WAWebMediaPanelHeader.styles").mediaPanelHeaderHidden),{children:[C.jsx("div",babelHelpers.extends({},g.props(r("WAWebMediaPanelHeader.styles").info),{children:C.jsx(r("WAWebCellFrame.react"),{idle:!0,image:C.jsx(o("WAWebDetailImage.react").DetailImage,{id:E,size:40}),primary:ne,secondary:te,theme:"media"})})),C.jsx("div",babelHelpers.extends({},g.props(r("WAWebMediaPanelHeader.styles").mediaPanelTools),{children:C.jsxs(o("WAWebMenuBar.react").MenuBar,{theme:"strong",gap:"single",children:[C.jsx(j,{isMediaDownloadable:J,msg:a,msgIndexInAlbum:l,onClose:c,onViewOnceInfoClick:s,openReactionTray:X,sendReactionButtonRef:H,theme:m}),C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:Z,title:r("WAWebFbtCommon")("Close"),onClick:t.onClose})]},"media-panel-header")})),ee]}))}T.displayName=T.name+" [from "+i.id+"]";function D(e){var t=e.isMediaDownloadable,n=e.msg,r=e.onClose,a=e.openReactionTray,i=e.sendReactionButtonRef;return C.jsxs(C.Fragment,{children:[o("WAWebMsgReply").canReplyMsg(n)?C.jsx(N,{msg:n,onClose:r}):null,o("WAWebMsgActionCapability").canStarMsg(n)?C.jsx(q,{msg:n}):null,n.canShowKeepOrUnkeepOption()?C.jsx(W,{msg:n}):null,o("WAWebMsgActionCapability").canPinMsg(n)?C.jsx(U,{msg:n}):null,o("WAWebReactionsUtils").canReactToMessage(n)?C.jsx(B,{msg:n,openReactionTray:a,sendReactionButtonRef:i}):null,C.jsx(M,{msg:n,onClose:r}),o("WAWebMsgActionCapability").canForwardMsg(n)?C.jsx(V,{msg:n}):null,C.jsx(K,{isMediaDownloadable:t,isAlbumMedia:!0,msg:n,onClose:r})]})}D.displayName=D.name+" [from "+i.id+"]";function x(e){var t=e.isMediaDownloadable,a=e.msg,i=e.onClose,l=e.openReactionTray,s=e.sendReactionButtonRef,u=e.theme,c=u===void 0?"default":u;return C.jsxs(C.Fragment,{children:[!o("WAWebMsgGetters").getIsStickerMsg(a)&&!o("WAWebMsgGetters").getIsCarouselCard(a)?C.jsx($,{msg:a,type:L.MenuBar,onClose:i,theme:c}):null,(o("WAWebMsgGetters").getIsStickerMsg(a)||o("WAWebMsgGetters").getIsMedia(a))&&!o("WAWebMsgGetters").getIsCarouselCard(a)&&!o("WAWebMsgGetters").getIsNewsletterMsg(a)?C.jsx(N,{msg:a,onClose:i}):null,o("WAWebMsgActionCapability").canStarMsg(a)?C.jsx(q,{msg:a}):null,o("WAWebMsgActionCapability").canPinMsg(a)?C.jsx(U,{msg:a}):null,a.canShowKeepOrUnkeepOption()?C.jsx(W,{msg:a}):null,o("WAWebMsgGetters").getIsStickerMsg(a)&&I(a)?C.jsx(M,{msg:a,onClose:i}):null,o("WAWebReactionsUtils").canReactToMessage(a)?C.jsx(B,{msg:a,openReactionTray:l,sendReactionButtonRef:s}):null,o("WAWebMsgActionCapability").canForwardMsg(a)?C.jsx(V,{msg:a}):null,o("WAWebMsgGetters").getIsStickerMsg(a)?null:C.jsx(w,{isMediaDownloadable:t,msg:a,type:L.MenuBar}),!o("WAWebMsgGetters").getIsStickerMsg(a)&&r("WAWebEnvironment").isWindows&&n("cr:7565")!=null&&t()?C.jsx(A,{msg:a}):null,o("WAWebMsgActionCapability").canReportMsg(a)?C.jsx(K,{isMediaDownloadable:t,isAlbumMedia:!1,msg:a,onClose:i}):null]})}x.displayName=x.name+" [from "+i.id+"]";function $(e){var t=e.msg,n=e.onClose,a=e.theme,i=a===void 0?"default":a,l=e.type,u=o("WAWebDrawerManagerContext").useDrawerManagerContext("right"),c=function(r){var e;r==null||r.stopPropagation(),n();var a=(e=u.existsDrawer())!=null?e:!1;a&&o("WAWebColumnChangeDispatch").Column.column===2&&o("WAWebDrawerManager").DrawerManager.closeDrawerRight();var i=o("WAWebChatMessageSearch").getSearchContext(o("WAWebFrontendMsgGetters").getChat(t),o("WAWebStateUtils").unproxy(t).id);o("WAWebCmd").Cmd.openChatAt({chat:o("WAWebFrontendMsgGetters").getChat(t),msgContext:i}).then(function(e){e&&(o("WAWebModalManager").ModalManager.close(),o("WAWebComposeBoxActions").ComposeBoxActions.focus(o("WAWebFrontendMsgGetters").getChat(t)))})},d=i==="media_hub"?o("WAWebChatRefreshedIcon.react").ChatRefreshedIcon:r("WDSIconIcArrowForward.react");return l===L.Dropdown?C.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:c,icon:C.jsx(d,{}),children:s._(/*BTDS*/"Go to message")}):C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:d,title:s._(/*BTDS*/"Go to message"),onClick:c})}$.displayName=$.name+" [from "+i.id+"]";function P(e){var t=e.msg;return C.jsx(o("WAWebDropdownItem.react").DropdownItem,{addSpacing:!0,testid:void 0,action:function(){o("WAWebCopyToClipboard").copyTextToClipboard(t.id.toString())},children:C.jsx(o("WAWebDevOnlyBadge.react").DevOnlyBadge,{label:"Copy Msg ID"})},"copy-id")}P.displayName=P.name+" [from "+i.id+"]";function N(e){var t=e.msg,n=e.onClose,a=function(r){n(),o("WAPromiseDelays").delayMs(o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION).then(E.bind(null,o("WAWebStateUtils").unproxy(t)))};return C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:r("WDSIconIcReply.react"),title:s._(/*BTDS*/"Reply"),onClick:a})}N.displayName=N.name+" [from "+i.id+"]";function M(e){var t=e.msg,n=e.onClose,a=function(a){o("WAWebModalManager").ModalManager.open(C.jsx(r("WAWebDeleteRevokeMsgFlow.react"),{chat:o("WAWebFrontendMsgGetters").getChat(t),msgList:[o("WAWebStateUtils").unproxy(t)],onDelete:n})),o("WAWebRevokeMetricUtils").UiRevokeActionHelper.startSession(),o("WAWebRevokeMetricUtils").UiRevokeActionHelper.messageSelected()};return C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:r("WDSIconIcDelete.react"),title:s._(/*BTDS*/"Delete"),onClick:a})}M.displayName=M.name+" [from "+i.id+"]";function w(e){var t=e.isMediaDownloadable,n=e.msg,a=e.type,i=function(t){t==null||t.stopPropagation(),o("WAWebFileSaver").FileSaver.initDownload(o("WAWebStateUtils").unproxy(n))};if(!t())return null;var l=r("WAWebEnvironment").isWindows?s._(/*BTDS*/"Save as..."):s._(/*BTDS*/"Download");return a===L.Dropdown?C.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:i,disabled:!t(),icon:C.jsx(o("WAWebIcDownloadIcon.react").IcDownloadIcon,{}),children:l}):C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:o("WAWebIcDownloadIcon.react").IcDownloadIcon,title:l,disabled:!t(),onClick:i})}w.displayName=w.name+" [from "+i.id+"]";function A(e){var t,a=e.msg,i=function(t){t==null||t.stopPropagation(),n("cr:7565")==null||n("cr:7565").openMediaFile(a,function(e){o("WAWebMediaDocumentUtils").displayFileOpeningToast(e)}).catch(function(e){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Error while opening media file: ",""])),e)})},l=function(t){t.stopPropagation(),n("cr:7565")&&n("cr:7565").saveMediaFile(o("WAWebStateUtils").unproxy(a)).then(function(){if(n("cr:13786"))return n("cr:13786").shareFile(o("WAWebStateUtils").unproxy(a))}).catch(function(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Error while sharing a message: ",""])),e)})},u=(t=n("cr:23046")==null||n("cr:23046").isWindowsShareSheetEnabled==null?void 0:n("cr:23046").isWindowsShareSheetEnabled())!=null?t:!1;if(u){var m=[C.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:l,icon:C.jsx(o("WAWebIcShareWindowsIcon.react").IcShareWindowsIcon,{}),children:s._(/*BTDS*/"Share")},"share"),C.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:i,icon:C.jsx(o("WAWebLaunchIcon.react").LaunchIcon,{}),children:s._(/*BTDS*/"Open with")},"open-with")];return C.jsx(r("WDSMenuBarItem.react"),{icon:r("WDSIconIcMoreVert.react"),title:s._(/*BTDS*/"More options"),dropdownMenu:{menu:m,type:o("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:o("WAWebDropdown.react").DirX.LEFT}})}return C.jsx(r("WDSMenuBarItem.react"),{icon:r("WDSIconIcOpenInNew.react"),title:s._(/*BTDS*/"Open with"),onClick:i})}A.displayName=A.name+" [from "+i.id+"]";function F(e){var t=e.sendReactionButtonRef;return C.jsx(r("WDSIconIcMood.react"),{containerRef:t})}F.displayName=F.name+" [from "+i.id+"]";function O(e){return function(){return C.jsx(F,{sendReactionButtonRef:e})}}function B(e){var t=e.msg,n=e.openReactionTray,a=e.sendReactionButtonRef;if(t.type===o("WAWebMsgType").MSG_TYPE.STICKER)return null;var i=O(a);return C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:i,title:s._(/*BTDS*/"React"),onClick:function(){n()}})}B.displayName=B.name+" [from "+i.id+"]";function W(e){var t=e.msg,n,a,i,l=o("useWAWebMsgValues").useMsgValues(t.id,[o("WAWebMsgGetters").getIsKept]),u=l[0],c=function(n){n==null||n.stopPropagation(),o("WAWebKeepInChatActions").runKeepInChatUX(o("WAWebStateUtils").unproxy(t),o("WAWebWamEnumKicEntryPointType").KIC_ENTRY_POINT_TYPE.MEDIA)},d=function(n){n==null||n.stopPropagation(),o("WAWebKeepInChatActions").runUndoKeepInChatUX(o("WAWebStateUtils").unproxy(t),o("WAWebWamEnumKicEntryPointType").KIC_ENTRY_POINT_TYPE.MEDIA)};if(u&&t.canShowUnkeepOption())n=r("WDSIconWdsIcBookmarkSlash.react"),a=d,i=s._(/*BTDS*/"Unkeep");else if(!u&&t.canShowKeepOption())n=r("WDSIconIcBookmark.react"),a=c,i=s._(/*BTDS*/"Keep");else return null;return C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:n,title:i,onClick:a},"keep-in-chat-button")}W.displayName=W.name+" [from "+i.id+"]";function q(e){var t=e.msg,n=o("useWAWebMsgValues").useMsgValues(t.id,[o("WAWebMsgGetters").getStar]),a=n[0],i,l,u;return a?(i=function(n){n==null||n.stopPropagation(),o("WAWebCmd").Cmd.sendUnstarMsgs(o("WAWebFrontendMsgGetters").getChat(t),[o("WAWebStateUtils").unproxy(t)])},l=r("WDSIconWdsIcGradeSlash.react"),u=s._(/*BTDS*/"_j{\"*\":\"Unstar messages\",\"_1\":\"Unstar message\"}",[s._plural(1)])):(i=function(n){n==null||n.stopPropagation(),o("WAWebCmd").Cmd.sendStarMsgs(o("WAWebFrontendMsgGetters").getChat(t),[o("WAWebStateUtils").unproxy(t)])},l=r("WDSIconIcGrade.react"),u=s._(/*BTDS*/"_j{\"*\":\"Star\"}",[s._plural(1)])),C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:l,title:u,onClick:i},"star-button")}q.displayName=q.name+" [from "+i.id+"]";function U(e){var t=e.msg,n,a,i,l=r("useWAWebIsPinnedMsg")(t.id),u=o("WAWebFrontendMsgGetters").getChat(t);return l?(n=function(n){n==null||n.stopPropagation();var e=o("WAWebPinInChatCollection").PinInChatCollection.getByParentMsgKey(t.id);new(o("WAWebPinnedMessagesUserJourneyLogger")).PinnedMessagesUserJourneyLogger(u).messageMenuClickUnpin(t,e),o("WAWebSendPinMessageAction").sendPinInChatMsg(t,o("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.UNPIN_FOR_ALL).catch(function(e){o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error while unpinning a message: ",""])),e)})},a=r("WDSIconWdsIcPushPinSlash.react"),i=s._(/*BTDS*/"Unpin")):(n=function(n){n==null||n.stopPropagation();var e=new(o("WAWebPinnedMessagesUserJourneyLogger")).PinnedMessagesUserJourneyLogger(u);e.messageMenuClickPin(t),o("WAWebModalManager").ModalManager.open(C.jsx(r("WAWebPinMessageModal.react"),{msg:t,logger:e}))},a=r("WDSIconIcPushPin.react"),i=s._(/*BTDS*/"Pin")),C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:a,title:i,onClick:n},"pin-button")}U.displayName=U.name+" [from "+i.id+"]";function V(e){var t=e.msg,n=function(n){n==null||n.stopPropagation(),o("WAWebFrontendMsgGetters").getIsUnsentMedia(t)?o("WAWebModalManager").ModalManager.open(C.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{title:s._(/*BTDS*/"Can't forward"),onOK:function(){return o("WAWebModalManager").ModalManager.close()},okText:r("WAWebFbtCommon")("OK"),children:s._(/*BTDS*/"_j{\"*\":\"Wait until the messages finish sending and displays a checkmark before forwarding.\",\"_1\":\"Wait until the message finishes sending and displays a checkmark before forwarding.\"}",[s._plural(1)])})):o("WAWebModalManager").ModalManager.open(C.jsx(o("WAWebForwardMessageModalLoadable").ForwardMessageModalLoadable,{msgs:[o("WAWebStateUtils").unproxy(t)],onClose:function(){return o("WAWebModalManager").ModalManager.close()}}),{transition:"modal-flow"})};return C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:r("WDSIconIcForward.react"),title:s._(/*BTDS*/"Forward"),onClick:n})}V.displayName=V.name+" [from "+i.id+"]";function H(e){var t=e.msg,n=function(){r("WAWebReplyToMsgChatAction")(t)};return C.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:n,icon:C.jsx(o("WAWebReplyPrivatelyRefreshedIcon.react").ReplyPrivatelyRefreshedIcon,{}),children:s._(/*BTDS*/"Reply privately")})}H.displayName=H.name+" [from "+i.id+"]";function G(e){var t=e.msg,n=function(n){n?o("WAWebSendSpamChatAction").sendMessageReportBlock(t,o("WAWebSpamConstants").SpamFlow.MediaViewer):o("WAWebSendSpamChatAction").sendMessageReport(t,o("WAWebSpamConstants").SpamFlow.MediaViewer).then(function(e){o("WAWebModalManager").ModalManager.close(),e!=null&&o("WAWebReportGatingUtils").isAusOSAReportingEnabled()&&R.load().then(function(t){return t.WAWebAusOSAReportModalTrigger(e)}).catch(function(e){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Error opening Aus OSA modal while reporting a message from media viewer: ",""])),e).sendLogs("report-message-aus-osa-from-media-viewer-error")})}).catch(function(e){o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Error while reporting a message from media viewer: ",""])),e).sendLogs("report-message-from-media-viewer-error")})},r=function(){var e,r;o("WAWebModalManager").ModalManager.open(C.jsx(o("WAWebMediaViewerReportSpamPopupLoadable").WAWebMediaViewerReportSpamPopupLoadable,{isBusiness:t.senderObj.isBusiness,isGroup:o("WAWebChatGetters").getIsGroup(o("WAWebFrontendMsgGetters").getChat(t)),isBizBot3p:(e=(r=o("WAWebFrontendMsgGetters").getChat(t).contact.businessProfile)==null?void 0:r.isBizBot3p)!=null?e:!1,onReport:n,onCancel:function(){return o("WAWebModalManager").ModalManager.close()},title:k(t)}))};return C.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:r,icon:C.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),children:k(t)})}G.displayName=G.name+" [from "+i.id+"]";function z(e){var t=e.msg,n=e.onClose,r=function(r){n(),o("WAPromiseDelays").delayMs(o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION+250).then(o("WAWebCmd").Cmd.msgInfoDrawer.bind(o("WAWebCmd").Cmd,o("WAWebStateUtils").unproxy(t)))};return C.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:r,icon:C.jsx(o("WAWebInfoRefreshedIcon.react").InfoRefreshedIcon,{}),children:s._(/*BTDS*/"Message info")})}z.displayName=z.name+" [from "+i.id+"]";function j(e){var t=e.isMediaDownloadable,n=e.msg,r=e.msgIndexInAlbum,a=e.onClose,i=e.onViewOnceInfoClick,l=e.openReactionTray,s=e.sendReactionButtonRef,u=e.theme,c=u===void 0?"default":u,d=b(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx),m=[];return d.isEnabled&&m.push(C.jsx(o("WAWebMediaIncrementalZoom").ZoomButton,{direction:"out"},"zoom-out"),C.jsx(o("WAWebMediaIncrementalZoom").ZoomButton,{direction:"in"},"zoom-in")),n.isViewOnce?m.push(C.jsx(Q,{isMediaDownloadable:t,msg:n,onClose:a,onViewOnceInfoClick:i},"view-once")):r>=0&&n.associationType===o("WAWebMessageAssociation.flow").MessageAssociationType.MEDIA_ALBUM?m.push(C.jsx(D,{isMediaDownloadable:t,msg:n,onClose:a,openReactionTray:l,sendReactionButtonRef:s},"album")):m.push(C.jsx(x,{isMediaDownloadable:t,msg:n,onClose:a,openReactionTray:l,sendReactionButtonRef:s,theme:c},"non-album")),m}j.displayName=j.name+" [from "+i.id+"]";function K(e){var t=e.isAlbumMedia,n=e.isMediaDownloadable,a=e.msg,i=e.onClose,l=o("WAWebSearchTheWebCommonUtils").getSupportedSearchOptions(a),u;l.get(o("WAWebSearchTheWebCommonUtils").SearchType.IMAGE)!=null&&(u=o("WAWebSearchTheWebCommonUtils").getSTWFormat(l));var c=[],d=o("WAWebFrontendMsgGetters").getChat(a);(o("WAWebMsgReply").canPrivateReply(a)||o("WAWebMsgReply").canPrivateReplyInRestrictedGrp(a))&&c.push(C.jsx(H,{msg:a},"private_reply")),t&&(o("WAWebMsgGetters").getIsSentByMe(a)&&c.push(C.jsx(z,{msg:a,onClose:i},"dropdownMsgInfo")),c.push(C.jsx($,{msg:a,type:L.Dropdown,onClose:i},"dropdownGoToMsg"),C.jsx(w,{isMediaDownloadable:n,msg:a,type:L.Dropdown},"dropdownDownload"))),u!=null&&c.push(C.jsx(r("WAWebSearchTheWebButton.react"),{messageType:a.getWamMessageType(),msg:a,entryPoint:o("WAWebWamEnumStwEntryPoint").STW_ENTRY_POINT.MEDIA_VIEWER,stwFormat:u},"search_the_web"));var m=!o("WAWebChatGetters").getIsNewsletter(d)&&(a.isViewOnce||o("WAWebMsgActionCapability").canReportMsg(a)),p=o("WAWebChatGetters").getIsNewsletter(d)&&o("WAWebMsgActionCapability").canReportMsg(a);return p?c.push(C.jsx(r("WAWebReportNewsletterPostSpamButton.react"),{msg:a},"reportSpam")):m&&c.push(C.jsx(G,{msg:a},"reportSpam")),o("WAWebMsgActionCapability").canReportToAdmin(a)&&c.push(C.jsx(r("WAWebSendForAdminReviewButton.react"),{msg:a},"report_to_admin")),o("WAWebDebugGatingUtils").msgDebugMenuItemsEnabled()&&(c.push(C.jsx(r("WAWebDropdownItemSeparator.react"),{})),c.push(C.jsx(P,{msg:a}))),C.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:r("WDSIconIcMoreVert.react"),title:s._(/*BTDS*/"Menu"),dropdownMenu:{menu:c,type:o("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:o("WAWebDropdown.react").DirX.LEFT},onOpen:function(){u!=null&&o("WAWebSearchTheWebEventLogger").logSTWEvent({stwEntryPoint:o("WAWebWamEnumStwEntryPoint").STW_ENTRY_POINT.MEDIA_VIEWER,stwInteraction:o("WAWebWamEnumStwInteraction").STW_INTERACTION.ENTRY_POINT_SURFACED,stwFormat:u,messageType:a.getWamMessageType()})}})}K.displayName=K.name+" [from "+i.id+"]";function Q(e){var t=e.isMediaDownloadable,n=e.msg,a=e.onClose,i=e.onViewOnceInfoClick;return C.jsxs(C.Fragment,{children:[C.jsx(o("WAWebMenuBar.react").MenuBarItem,{icon:C.jsx(r("WDSIconWdsIcViewOnce.react"),{iconXstyle:r("WAWebMediaPanelHeader.styles").voIcon}),title:s._(/*BTDS*/"View once info"),onClick:i}),C.jsx(K,{isMediaDownloadable:t,isAlbumMedia:!1,msg:n,onClose:a})]})}Q.displayName=Q.name+" [from "+i.id+"]",l.default=T}),226);
__d("WAWebMediaSticker.react",["Promise","WAWebFirstPartyStickerInfo.react","WAWebFlex.react","WAWebImg.react","WAWebLottieSticker.react","WAWebMediaUrlProvider","WAWebMediaViewerStyles","WAWebMediaZoomable.react","WAWebNewsletterCollection","WAWebNewsletterMembershipUtil","WAWebStickerDetailsStickerPackInfo.react","WAWebStickerLikeMsgPlaceholder.react","WAWebStickerModel","WAWebStickerUtils","WAWebWamEnumWebcRmrReasonCode","react","stylex","useMergeRefs","useWAWebModelValues"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c,d,m=d||(d=r("react")),p=(c||(c=o("react"))).useRef,_=376,f={container:{width:"xh8yej3",height:"x5yr21d",$$css:!0}};function g(t){var a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=i.msg,c=o("useWAWebModelValues").useModelValues(i.mediaData,["encFilehash","directPath","filehash","mediaKey","mediaKeyTimestamp","mediaStage","mimetype","fullWidth","fullHeight","isFirstParty","isAvatar","stickerPackId","stickerPackName","stickerPackPublisher","extractedLottieSticker","accessibilityLabel"]),d=p(null),g=r("useMergeRefs")(a,d),h=function(t){var e;(e=d.current)==null||e.onClick(t)},y=function(){return l?l.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:o("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}):(s||(s=n("Promise"))).resolve()},C=r("WAWebNewsletterCollection").getActive(),b=o("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(C==null?void 0:C.newsletterMetadata),v=c.isFirstParty===!0?m.jsx(r("WAWebFirstPartyStickerInfo.react"),{stickerPackId:c.stickerPackId,onStickerPackView:i.onStickerPackView,stickerPackViewDelay:i.stickerPackViewDelay,showViewPackButton:C!=null?c.isAvatar!==!0&&b:c.isAvatar!==!0,sticker:new(o("WAWebStickerModel")).StickerModel({id:c.filehash,mimetype:c.mimetype,width:c.fullWidth,height:c.fullHeight,filehash:c.filehash,encFilehash:c.encFilehash,directPath:c.directPath,mediaKey:c.mediaKey,mediaKeyTimestamp:c.mediaKeyTimestamp})}):m.jsx(o("WAWebStickerDetailsStickerPackInfo.react").StickerDetailsStickerPackInfo,{name:c.stickerPackName,publisher:c.stickerPackPublisher,theme:o("WAWebStickerDetailsStickerPackInfo.react").Theme.MediaViewer,sticker:new(o("WAWebStickerModel")).StickerModel({id:c.filehash,mimetype:c.mimetype,width:c.fullWidth,height:c.fullHeight,filehash:c.filehash,encFilehash:c.encFilehash,directPath:c.directPath,mediaKey:c.mediaKey,mediaKeyTimestamp:c.mediaKeyTimestamp})}),S=m.jsx(r("WAWebMediaUrlProvider"),{mediaData:c,placeholderRenderer:function(){return m.jsx(r("WAWebStickerLikeMsgPlaceholder.react"),{size:_})},downloadMedia:y,children:function(t){return m.jsx(r("WAWebImg.react"),{className:(u||(u=r("stylex")))(r("WAWebMediaViewerStyles").content),onClick:h,src:t,onLoad:i.onLoad})}});return o("WAWebStickerUtils").getStickerFileType(c.mimetype)===o("WAWebStickerUtils").StickerFileType.LOTTIE&&(S=m.jsx(r("WAWebLottieSticker.react"),{className:"",mediaData:c,startAnimation:!0,onClick:h,placeholderRenderer:function(){return null},downloadMedia:y})),m.jsxs(o("WAWebFlex.react").FlexColumn,{align:"center",justify:"center",xstyle:f.container,children:[m.jsx("div",{className:"xh8yej3 x5yr21d xlnrm6 xjkwb7i x1iymm2a xupqr0c","data-testid":void 0,children:m.jsx(r("WAWebMediaZoomable.react"),{ref:g,width:c.fullWidth,height:c.fullHeight,onZoomIn:i.onImgZoomIn,msg:l,children:S})}),v]})}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);
__d("WAWebMediaViewerCaption.react",["WAWebFormatConfiguration","WAWebMsgLinks","WAWebMsgPhoneNumbers"],(function(t,n,r,o,a,i,l){function e(e){var t=e.msg,n=e.id;return o("WAWebFormatConfiguration").Conversation({mentions:t.mentionMap(),groupMentions:t.groupMentionMap(),phoneNumbers:o("WAWebMsgPhoneNumbers").getPhoneNumbersFromMsg(t),links:o("WAWebMsgLinks").getLinksFromMsg(t),trusted:!0,fromMe:n.fromMe,fromChatWid:n.remote,parseLists:!0,parseQuotes:!0,parseInlineCode:!0})}l.getCaptionFormatters=e}),98);
__d("WAWebMediaViewerMediaVideo.react",["fbt","WAWebAddOnBubbleType","WAWebAddOnBubblesContainer.react","WAWebAnnotation.react","WAWebBlurredImage.react","WAWebGetDisplayType","WAWebMediaTypes","WAWebMediaViewerStyles","WAWebMsgGetters","WAWebNoop","WAWebObjectFit.react","WAWebPipConst","WAWebPipFloatingVideoPlayer.react","WAWebPipMsgVideoPlayer.react","WAWebReactionsUtils","WAWebUIRefreshGatingUtils","WAWebVideo.react","WAWebVideoUtils","WAWebWamEnumWebcRmrReasonCode","isNonZeroNumber","react","stylex","useWAWebModelValues"],(function(t,n,r,o,a,i,l,s){var e=["ref"],u,c,d,m=d||(d=o("react")),p=u||(u=r("react")),_=m.useEffect,f=m.useImperativeHandle,g=m.useMemo,h=m.useRef,y=m.useState;function C(t){var n,a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=i.autoPlay,u=i.msg,d=i.onLoad,m=i.onClose,C=i.onLoadedData,S=i.startTime,R=S===void 0?0:S,L=o("useWAWebModelValues").useModelValues(i.mediaData,["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]),E=y(!1),k=E[0],I=E[1],T=y(!0),D=T[0],x=T[1],$=h(),P=g(function(){return(L.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED||o("WAWebVideoUtils").isMsgStreamable(u))&&o("isNonZeroNumber").isNonZeroNumber(L.fullWidth)&&o("isNonZeroNumber").isNonZeroNumber(L.fullHeight)?b(L):{width:0,height:0}},[L,u]);_(function(){if(!o("WAWebVideoUtils").isMsgStreamable(u))return u.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:o("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0}),function(){u.mediaObject&&u.cancelDownload()}},[]);var N=function(t){I(t)};f(a,function(){return{getContainerElement:function(){return $.current},closingMedia:function(){x(!1)}}});var M=L.isGif,w=L.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED||o("WAWebVideoUtils").isMsgStreamable(u);w=w||u!=null&&u.isForcingRMR();var A=null,F=o("WAWebGetDisplayType").getDisplayType(u),O=o("WAWebAddOnBubbleType").AddOnBubbleType.MEDIA_VIEWER;if(u&&o("WAWebReactionsUtils").shouldShowReactionBubble(u,O)&&(A=p.jsx(r("WAWebAddOnBubblesContainer.react"),{isOutgoingMsg:o("WAWebMsgGetters").getIsSentByMe(u),displayType:F,bubbleType:O,parentIds:[u.id.toString()],displayReactionBubble:D})),w){var B=o("WAWebUIRefreshGatingUtils").checkIfShouldBeEnabledInWindowsEnv()?s._(/*BTDS*/"Video playback is not supported on this device."):s._(/*BTDS*/"Your browser doesn't support video playback."),W;!k&&u!=null&&u.interactiveAnnotations&&u.interactiveAnnotations.length>0&&(W=p.jsx(r("WAWebAnnotation.react"),{annotations:u.interactiveAnnotations}));var q;return M?q=p.jsxs("div",babelHelpers.extends({},(c||(c=r("stylex"))).props(r("WAWebMediaViewerStyles").content),{ref:$,"data-testid":void 0,children:[p.jsx(r("WAWebVideo.react"),{src:L.renderableUrl,onClick:v,autoPlay:!0,loop:!0,onLoadedData:C,children:B}),W]})):q=p.jsx("div",babelHelpers.extends({ref:$},(c||(c=r("stylex"))).props(r("WAWebMediaViewerStyles").content),{onClick:v,"data-testid":void 0,children:p.jsx(o("WAWebPipMsgVideoPlayer.react").WrappedMsgVideoPlayer,{msg:u,mediaData:L,startTime:R,onClose:m,onError:r("WAWebNoop"),onFullscreenToggle:N,autoPlay:l,type:o("WAWebPipConst").PlayerType.MEDIA_VIEWER,overlays:W,noPip:u==null?void 0:u.isViewOnce,onLoadedData:C})})),p.jsxs(r("WAWebObjectFit.react"),{type:"scaleDown",position:"relative",objectPosition:"relative",size:P,onObjectLoad:d,children:[q,A]})}return p.jsxs(r("WAWebObjectFit.react"),{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:L.fullWidth,height:L.fullHeight},children:[p.jsx(r("WAWebBlurredImage.react"),{altText:(n=u.caption)!=null?n:"",mediaData:L}),A]})}C.displayName=C.name+" [from "+i.id+"]";function b(e){if(e.isGif){var t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}return e.fullWidth>=o("WAWebPipFloatingVideoPlayer.react").MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:o("WAWebPipFloatingVideoPlayer.react").MIN_WIDTH,height:e.fullHeight}}function v(e){e.stopPropagation()}l.default=C}),226);
__d("WAWebMediaViewerShortcuts.react",["fbt","WALogger","WAWebEnvironment","WAWebFileSaver","WAWebStateUtils","WAWebToast.react","WAWebToastManager","asyncToGeneratorRuntime","cr:7565","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=u||(u=r("react")),p=d.useCallback,_=d.useEffect,f=d.useMemo;function g(t){var a=p(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){n("cr:7565")&&n("cr:7565").copyMediaFile(o("WAWebStateUtils").unproxy(t)).then(function(e){o("WAWebToastManager").ToastManager.open(m.jsx(o("WAWebToast.react").Toast,{msg:s._(/*BTDS*/"Image copied: {fileName}",[s._param("fileName",e)])}))}).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error while copying image: ",""])),t)})}),[t]),i=f(function(){return{s:function(){o("WAWebFileSaver").FileSaver.initDownload(o("WAWebStateUtils").unproxy(t))},c:function(){a()}}},[a,t]),l=p(function(e){if(e.ctrlKey){var t=e.key,n=i[t];n!=null&&(e.preventDefault(),n(e))}},[i]);_(function(){var e=r("WAWebEnvironment").isWindows;if(e)return window.addEventListener("keydown",l),function(){window.removeEventListener("keydown",l)}},[l,t])}l.useMediaViewerShortcuts=g}),226);
__d("WAWebWdsIllViewOncePhotoIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="wds-ill-view-once-photo";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=120,R=180;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 180 120",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),version:"1.1",id:"Layer_1",x:"0",y:"0",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("style",{children:".st0{fill:#25d366;stroke:#111b21;stroke-width:1.4412;stroke-linecap:round;stroke-miterlimit:10}.st2,.st4{fill:#e6ffda;stroke:#111b21;stroke-width:1.5}.st4{fill:#fcf5eb;stroke-miterlimit:10}.st6{fill:#0a0a0a}"}),c.jsx("path",{className:"st0",d:"M82 1.3H33.2c-8.7 0-15.8 7.1-15.8 15.8V103c0 8.7 7.1 15.8 15.8 15.8h48.9c8.7 0 15.8-7.1 15.8-15.8V17.2C97.8 8.4 90.7 1.3 82 1.3z"}),c.jsx("path",{className:"st0",d:"M97.8 95.7V17.1c0-8.6-7-15.6-15.6-15.6H40.3c-8.6 0-15.6 7-15.6 15.6v78.7c0 8.7 5 15.8 15.8 15.8h41.6c8.3 0 15.7-7.1 15.7-15.9q0 0 0 0z"}),c.jsx("path",{className:"st0",d:"M61.2 103c5 0 9-2.2 9-4.8s-4-4.8-9-4.8-9 2.2-9 4.8 4 4.8 9 4.8z"}),c.jsx("path",{d:"M55.6 14.4H67",fill:"none",stroke:"#111b21",strokeWidth:1.441,strokeLinecap:"round",strokeMiterlimit:10}),c.jsx("path",{className:"st2",d:"M133.8 86.3H73.3c-3.5 0-6.1-.8-7.7-2.5-1.6-1.6-2.6-4.1-2.6-7.5V33.6c0-3.5.9-6 2.6-7.6 1.6-1.6 4.1-2.5 7.7-2.5h60.5c3.6 0 6.1.9 7.7 2.5s2.5 4.1 2.5 7.6v42.7c0 3.5-.9 6-2.5 7.5-1.7 1.7-4.3 2.5-7.7 2.5z"}),c.jsx("path",{d:"M143.6 75.6 121.7 55c-1.6-1.4-3.6-2.3-5.5-2.3-2.1 0-3.8.7-5.5 2.3L93.9 69.9l-6.8-6.2c-1.5-1.4-3.3-2.1-5-2.1-1.6 0-3.2.6-4.7 2.1L63.3 76.3",fill:"none",stroke:"#111b21",strokeWidth:1.5}),c.jsx("path",{className:"st2",d:"M96.6 47.1c0 4.1-3.4 7.5-7.4 7.5-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5c4 0 7.4 3.3 7.4 7.5z"}),c.jsx("path",{className:"st4",d:"M162.6 76c0 11.3-9.1 20.4-20.4 20.4s-20.4-9.1-20.4-20.4 9.1-20.4 20.4-20.4 20.4 9.1 20.4 20.4z"}),c.jsx("path",{d:"M141.8 59.2c-8.6.5-15.5 6.9-16.5 14.5-1.2 9 6.1 18.3 16.5 19.1",fill:"none",stroke:"#111b21",strokeWidth:1.5,strokeLinecap:"round",strokeMiterlimit:10}),c.jsx("path",{className:"st4",d:"M143.8 84c.7 0 1.3-.6 1.3-1.3V70c0-1.3-1.2-2.4-2.6-2.1l-3.4.8c-.9.2-1.5 1-1.5 2.1 0 1.3 1.2 2.3 2.5 2.1l1-.2v10.1c0 .7.6 1.3 1.3 1.3z"}),c.jsx("circle",{className:"st6",cx:149.8,cy:61.6,r:1.5}),c.jsx("circle",{className:"st6",cx:155.9,cy:67.9,r:1.5}),c.jsx("circle",{className:"st6",cx:158.2,cy:76.3,r:1.5}),c.jsx("circle",{className:"st6",cx:155.9,cy:84.8,r:1.5}),c.jsx("circle",{className:"st6",cx:150.1,cy:90.6,r:1.5})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.WdsIllViewOncePhotoIcon=m}),98);
__d("WAWebViewOnceNux.react",["fbt","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebFlexItem.react","WAWebText.react","WAWebWdsIllViewOncePhotoIcon.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react")),c={graphic:{marginBottom:"xod5an3",paddingTop:"x1h678fw",paddingInlineEnd:"xcldk2z",paddingBottom:"xv6tirj",paddingInlineStart:"x1phvje8",$$css:!0}};function d(e){var t=e.onOkClick;return u.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{onOK:t,cancelText:s._(/*BTDS*/"Learn more"),onCancel:function(){o("WAWebExternalLink.react").openExternalLink(o("WAWebFaqUrl").getViewOnceFaqUrl())},children:u.jsxs(o("WAWebFlex.react").FlexColumn,{children:[u.jsx(r("WAWebFlexItem.react"),{xstyle:c.graphic,align:"center",children:u.jsx(o("WAWebWdsIllViewOncePhotoIcon.react").WdsIllViewOncePhotoIcon,{width:195})}),u.jsx(o("WAWebText.react").WAWebTextLarge,{children:e.isPhoto?s._(/*BTDS*/"This photo is set to view once"):s._(/*BTDS*/"This video is set to view once")}),u.jsx(o("WAWebText.react").WAWebTextMuted,{children:e.isPhoto?s._(/*BTDS*/"For more privacy, this photo will disappear after you close it."):s._(/*BTDS*/"For more privacy, this video will disappear after you close it.")})]})})}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),226);
__d("WAWebMediaViewerModal.react",["cx","fbt","WALogger","WATypeUtils","WAWebAppTracker","WAWebClassnames","WAWebEmojiText.react","WAWebFocusTracer","WAWebFrontendMsgGetters","WAWebGroupMetadataContext","WAWebIncrementalZoomUtils","WAWebKeyboardHotKeys.react","WAWebMarkPlayedMsgAction","WAWebMediaAudio.react","WAWebMediaData","WAWebMediaImage.react","WAWebMediaIncrementalZoom","WAWebMediaPanelHeader.react","WAWebMediaStage.react","WAWebMediaSticker.react","WAWebMediaTypes","WAWebMediaViewerCaption.react","WAWebMediaViewerConstants","WAWebMediaViewerFlow.react","WAWebMediaViewerMediaVideo.react","WAWebMediaViewerModalStyle","WAWebMediaViewerShortcuts.react","WAWebModalManager","WAWebMsgActionCapability","WAWebMsgGetters","WAWebNux","WAWebResizeObserver.react","WAWebTPPdfViewerGatingUtils","WAWebTimeSpentLoggingNavigation","WAWebUISpacing","WAWebUimUie.react","WAWebVelocityAnimate","WAWebViewOnceNux.react","WDSButton.react","WDSIconIcChevronLeft.react","WDSIconIcChevronRight.react","WDSTooltip.react","cr:23046","cr:27506","react","stylex","useWAWebModelValues","useWAWebMsgValues","useWAWebNux","useWAWebThrottledCallback"],(function(t,n,r,o,a,i,l,s,u){var e,c,d,m,p,_,f=_||(_=o("react")),g=m||(m=r("react")),h=f.useContext,y=f.useEffect,C=f.useId,b=f.useMemo,v=f.useRef,S=f.useState;function R(e){e==null||e.stopPropagation()}function L(t){var a,i,l=t.msg,s=t.onImageLoad,m=t.isAnimatingThumbs,_=t.onImgZoomIn,f=t.onExitAnimation,C=t.onBack,R=t.shouldShowNumberText,L=t.shouldShowAllMedia,T=o("useWAWebMsgValues").useMsgValues(t.msg.id,[(i=o("WAWebMsgGetters")).getId,i.getStar,o("WAWebFrontendMsgGetters").getIsUnsentMedia,i.getIsViewOnce,i.getIsStickerMsg,i.getHasThumbList,i.getCaption,i.getInteractiveAnnotations,i.getType,i.getMessageSecret]),D=T[0],x=T[1],$=T[2],P=T[3],N=T[4],M=T[5],w=T[6],A=T[7],F=T[8],O=T[9],B=o("WAWebFrontendMsgGetters").getChat(l),W=o("useWAWebModelValues").useModelValues(t.mediaData,["mediaStage","type","isGif","mimetype","filename"]),q=h(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx),U=q.hasOverflownThumbnailSection,V=h(o("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext)||U,H=v(null),G=v(null),z=v(null),j=v(null),K=v(null),Q=v(!1),X=v(!1),Y=v(!1),J=r("useWAWebNux")(o("WAWebNux").NUX.EPHEMERAL_VIEW_ONCE_RECEIVER),Z=J[0],ee=J[1],te=P&&Z,ne=t.getZoomNode,re=b(function(){return W.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED&&ne?ne(D):null},[W.mediaStage,ne,D]),oe=S(!1),ae=oe[0],ie=oe[1],le=q.isEnabled,se=S(!1),ue=se[0],ce=se[1],de=[r("WAWebMediaData").TYPE.IMAGE,r("WAWebMediaData").TYPE.STICKER].includes(W.type),me=S(de),pe=me[0],_e=me[1],fe=S(!t.isAnimatingThumbs&&!pe),ge=fe[0],he=fe[1],ye=S(!1),Ce=ye[0],be=ye[1],ve=P||!o("WAWebMsgActionCapability").canWamoSubMsgBeSharedByUser(l,B),Se=v(null);o("WAWebIncrementalZoomUtils").usePreventDefaultZoom(Se);var Re=function(){var e=g.jsx(r("WAWebViewOnceNux.react"),{isPhoto:W.type===r("WAWebMediaData").TYPE.IMAGE,onOkClick:function(){ee(),o("WAWebModalManager").ModalManager.close()}});o("WAWebModalManager").ModalManager.open(e)},Le=r("useWAWebThrottledCallback")(function(e,t){if(!ue){var n=H.current;if(n){var a=n.getInsideContainer();if(!(!a||!(a instanceof HTMLElement))){var i=n.getOutsideContainer();if(!(!i||!(i instanceof HTMLElement))){var l=n.getTranslatePosition(i,e,t),s=l.translateX,u=l.translateY;r("WAWebVelocityAnimate")(a,"stop"),r("WAWebVelocityAnimate")(a,{translateX:s,translateY:u,scale:o("WAWebMediaViewerConstants").ZOOM_IN_FACTOR},{duration:0})}}}}});y(function(){return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerModal: Opened"]))),te&&Re(),r("WAWebFocusTracer").focus(j.current),function(){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerModal: Closed"]))),I(),Le.cancel()}},[]),y(function(){k(W.type)},[W.type]);var Ee=function(){Re()},ke=function(t,n){var e,a=n.getBoundingClientRect(),i=t.getBoundingClientRect(),l=i.top-a.top,s=i.left-a.left,u=t.clientWidth/n.clientWidth,c=(n.clientHeight-t.clientHeight)/2,d=(n.clientWidth-t.clientWidth)/2;l-=c,s-=d,r("WAWebVelocityAnimate")(n,{opacity:[1,0],translateX:[0,s],translateY:[0,l],scale:[1,u]},{duration:o("WAWebMediaViewerConstants").ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(function(){return _e(!1)});var m=(e=z.current)==null?void 0:e.getElement();m&&r("WAWebVelocityAnimate")(m,{opacity:[1,0]},{duration:o("WAWebMediaViewerConstants").ANIMATION_DURATION})},Ie=function(){P&&o("WAWebMarkPlayedMsgAction").canMarkPlayed(l)&&o("WAWebMarkPlayedMsgAction").markPlayed(l)},Te=function(t){Ie(),s&&s();var e=re,n=t.target;if(!e||!n||!(n instanceof HTMLElement)||Y.current||le){_e(!1);return}Y.current=!0,ke(e,n)},De=function(){var e;if(!Q.current){Q.current=!0,o("WATypeUtils").isFunction(f)&&f();var n=t.getZoomNode&&t.getZoomNode(D);if(!n)return C();var a;if(de&&H.current){var i;a=H.current.getInsideContainer(),(i=H.current)==null||i.closingMediaZoomable()}else if(W.isGif&&G.current){var l;a=G.current.getContainerElement(),(l=G.current)==null||l.closingMedia()}else K.current&&(a=K.current);if(!a)return C();var s=a,u=a.getBoundingClientRect(),c=n.getBoundingClientRect(),d=c.top-u.top,m=c.left-u.left,p=n.clientWidth/s.clientWidth,_=(s.clientHeight-n.clientHeight)/2,g=(s.clientWidth-n.clientWidth)/2;d-=_,m-=g,r("WAWebVelocityAnimate")(a,{translateX:[m,0],translateY:[d,0],scale:[p,1]},{duration:o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(function(){C()});var h=(e=z.current)==null?void 0:e.getElement();h&&r("WAWebVelocityAnimate")(h,{opacity:[0,1]},{duration:o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},xe=function(t){var e=H.current;t&&e&&(X.current=e.getHeightOverflow()>0||e.getWidthOverflow()>0),ie(t),_(t)},$e=function(t){Le.cancel();var e=H.current;e&&ae&&e.onClick(t)},Pe=function(t){le||Le(t.pageX,t.pageY)},Ne=function(t){var e,n=(e=H.current)==null?void 0:e.getInsideContainer(),r=!!(n!=null&&n.contains(document.activeElement));if(!(m||pe||!r)){Le.cancel();var o=H.current;o!=null&&o.onKeyboardZoom(t)}},Me=function(){be(!0)},we=function(){be(!1)},Ae=function(){ce(!0)},Fe=function(){ce(!1)};y(function(){!ge&&!m&&!pe&&he(!0)},[m,ge,pe]),o("WAWebTimeSpentLoggingNavigation").useTsNavigation({surface:"media-viewer"});var Oe=null,Be=t.msgIndexInAlbum>=0&&t.albumSize>=0;function We(){return w!=null&&w!==W.filename?[{testid:"media-caption",text:w}]:[]}if(w||Be){var qe=function(){var e=w==null&&Ue!=null?Ue:w,t=[{testid:"media-caption",text:e}];return R&&w!=null&&Ue!=null&&t.push({testid:"media-number-caption",text:Ue}),t},Ue;Be&&(Ue=u._(/*BTDS*/"{number} of {totalNumber}",[u._param("number",t.msgIndexInAlbum+1),u._param("totalNumber",t.albumSize)]));var Ve=o("WAWebMediaViewerCaption.react").getCaptionFormatters({msg:l,id:D}),He=W.type===r("WAWebMediaData").TYPE.IMAGE&&!P,Ge=!ge&&(W.isGif||He)||q.isZoomedIn,ze={className:o("WAWebClassnames").classnamesConvertMeToStylexPlease("_alhf",(p||(p=r("stylex")))(r("WAWebMediaViewerModalStyle").mediaCaption,Ge&&r("WAWebMediaViewerModalStyle").mediaCaptionHidden)),formatters:Ve};Oe=g.jsx(g.Fragment,{children:(o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(W.mimetype)?We():qe()).map(function(e,t){return g.jsx(o("WAWebEmojiText.react").EmojiText,babelHelpers.extends({},e,ze,{ref:function(t){z.current=t}}),t)})})}var je=babelHelpers.extends({},(p||(p=r("stylex"))).props(r("WAWebMediaViewerModalStyle").captionWrapper,V&&r("WAWebMediaViewerModalStyle").captionWrapperZoomedIn));Oe=q.isEnabled?g.jsx(r("WAWebResizeObserver.react"),babelHelpers.extends({component:"p",onResize:function(t){q.setCaptionHeight(t.height)}},je,{children:Oe})):g.jsx("p",babelHelpers.extends({},je,{children:Oe}));var Ke;switch(W.type){case r("WAWebMediaData").TYPE.IMAGE:Ke=g.jsx(r("WAWebMediaImage.react"),{msg:l,mediaData:W,onLoad:Te,onImgZoomIn:xe,onAnnotationTooltipDisplay:Ae,onAnnotationTooltipDismiss:Fe,preventDownload:ve,ref:H},D.toString());break;case r("WAWebMediaData").TYPE.STICKER:Ke=g.jsx(r("WAWebMediaSticker.react"),{msg:l,mediaData:W,onLoad:Te,onImgZoomIn:xe,onStickerPackView:De,stickerPackViewDelay:o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,ref:H},D.toString());break;case r("WAWebMediaData").TYPE.VIDEO:Ke=g.jsx(r("WAWebMediaViewerMediaVideo.react"),{autoPlay:!te,msg:l,mediaData:W,onLoadedData:W.isGif?Te:Ie,startTime:t.startTime,onClose:De,ref:G},D.toString());break;case r("WAWebMediaData").TYPE.AUDIO:Ke=g.jsx(r("WAWebMediaAudio.react"),{mediaData:W,msg:l},D.toString());break;case r("WAWebMediaData").TYPE.DOCUMENT:n("cr:27506")&&o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(W.mimetype)&&(Ke=g.jsx(n("cr:27506"),{onLoad:Te,msg:l,mediaData:W,containerRef:K},D.toString()));break;default:o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["type: ",""])),W.type).sendLogs("MediaViewerModal: unexpected media type")}var Qe=p(r("WAWebMediaViewerModalStyle").media,!!Oe&&r("WAWebMediaViewerModalStyle").mediaWithCaption),Xe=(a=n("cr:23046")==null?void 0:n("cr:23046").isWindowsHybridEnabled())!=null?a:!1,Ye=We().length===0&&o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(W.mimetype),Je=o("WAWebClassnames").classnamesConvertMeToStylexPlease("overlay",p((pe||m)&&r("WAWebMediaViewerModalStyle").mediaViewerAnimate,ae&&r("WAWebMediaViewerModalStyle").cursorZoomOut,r("WAWebMediaViewerModalStyle").mediaViewer,!M&&o("WAWebUISpacing").uiPadding.bottom40,Xe&&r("WAWebMediaViewerModalStyle").mediaViewerHybrid,Ye&&o("WAWebUISpacing").uiPadding.bottom0)),Ze=ae&&X.current?Pe:null,et=ae?$e:null,tt=ae?null:De;return tt!=null&&P&&(tt=Me),o("WAWebMediaViewerShortcuts.react").useMediaViewerShortcuts(l),g.jsx(o("WAWebUimUie.react").UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:function(t,n){var e;if(!q.isEnabled){De();return}var r=n instanceof KeyboardEvent&&n.key==="Escape";if(!r||q.currentZoomLevel===1){De();return}(e=q.getHandler())==null||e.performZoom(1)},children:g.jsx(o("WAWebKeyboardHotKeys.react").HotKeys,{handlers:{space:Ne,enter:Ne},ref:j,children:g.jsxs("div",{className:Je,"data-animate-media-viewer":!0,"data-testid":void 0,onClick:et,onMouseMove:Ze,children:[g.jsx(r("WAWebMediaPanelHeader.react"),{isHighlightClose:Ce,msg:l,mediaData:W,onClose:De,onHightlightCloseEnd:we,onViewOnceInfoClick:Ee,msgIndexInAlbum:t.msgIndexInAlbum,theme:L===!0?"media_hub":void 0}),g.jsx("div",babelHelpers.extends({ref:Se},p.props([r("WAWebMediaViewerModalStyle").mediaContent,o("WAWebUISpacing").uiPadding.top10,o("WAWebUISpacing").uiPadding.bottom15],N&&r("WAWebMediaViewerModalStyle").mediaContentSticker,Ye&&o("WAWebUISpacing").uiPadding.bottom0),{onClick:tt,children:g.jsx(E,{hasNavigationButtons:M,onNext:t.onNext,onPrev:t.onPrev,imgZoomed:ae,children:g.jsxs("div",{className:Qe,children:[g.jsx(r("WAWebMediaStage.react"),{msg:l,mediaData:W}),Ke,g.jsx(r("WAWebGroupMetadataContext").Provider,{value:B.groupMetadata,children:Oe})]})})}))]})})})}L.displayName=L.name+" [from "+i.id+"]";function E(e){var t=e.children,n=e.hasNavigationButtons,a=e.imgZoomed,i=e.onNext,l=e.onPrev,s=h(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx).isEnabled,c=h(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx).isZoomedIn,d=C(),m=C();return g.jsxs(g.Fragment,{children:[n&&g.jsx("div",babelHelpers.extends({},(p||(p=r("stylex"))).props(r("WAWebMediaViewerModalStyle").mediaNavBtn,r("WAWebMediaViewerModalStyle").mediaNavBtnPrev,c&&r("WAWebMediaViewerModalStyle").mediaNavBtnHidden,s&&r("WAWebMediaViewerModalStyle").mediaNavBtnPrevIncrementalZoom),{children:g.jsx("div",{onClick:l?null:R,children:g.jsx(r("WDSTooltip.react"),{id:d,label:u._(/*BTDS*/"Previous"),children:g.jsx(r("WDSButton.react"),{Icon:r("WDSIconIcChevronLeft.react"),variant:"tonal",type:"media",size:"medium",directional:!0,onPress:l!=null?l:void 0,disabled:!l||a,testid:void 0,"aria-describedby":d,"aria-label":u._(/*BTDS*/"Previous")})})})})),t,n&&g.jsx("div",babelHelpers.extends({},(p||(p=r("stylex"))).props(r("WAWebMediaViewerModalStyle").mediaNavBtn,r("WAWebMediaViewerModalStyle").mediaNavBtnNext,c&&r("WAWebMediaViewerModalStyle").mediaNavBtnHidden,s&&r("WAWebMediaViewerModalStyle").mediaNavBtnNextIncrementalZoom),{children:g.jsx("div",{onClick:i?null:R,children:g.jsx(r("WDSTooltip.react"),{id:m,label:u._(/*BTDS*/"Next"),children:g.jsx(r("WDSButton.react"),{Icon:r("WDSIconIcChevronRight.react"),variant:"tonal",type:"media",size:"medium",directional:!0,onPress:i!=null?i:void 0,disabled:!i||a,testid:void 0,"aria-describedby":m,"aria-label":u._(/*BTDS*/"Next")})})})}))]})}E.displayName=E.name+" [from "+i.id+"]";function k(e){var t;(t=o("WAWebAppTracker")).AppTracker.start(t.AppTrackerType.MediaOpen),t.AppTracker.stop(t.AppTrackerType.MediaOpenImage),t.AppTracker.stop(t.AppTrackerType.MediaOpenVideo),e===r("WAWebMediaData").TYPE.IMAGE?o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.MediaOpenImage):e===r("WAWebMediaData").TYPE.VIDEO&&o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.MediaOpenVideo)}function I(){var e;(e=o("WAWebAppTracker")).AppTracker.stop(e.AppTrackerType.MediaOpen),e.AppTracker.stop(e.AppTrackerType.MediaOpenImage),e.AppTracker.stop(e.AppTrackerType.MediaOpenVideo)}l.default=L}),226);
__d("WAWebThumbList.react",["fbt","WALogger","WAMapsShallowEqual","WAWebAllMediaCollection","WAWebFocusTracer","WAWebMediaIncrementalZoom","WAWebMediaThumb.react","WAWebMediaViewerFlow.react","WAWebMsgGetters","WAWebPREGatingUtils","WAWebSpinner.react","WAWebUISpacing","react","stylex","useWAWebPrevious","useWAWebThrottledCallback"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m=d||(d=o("react")),p=u||(u=r("react")),_=m.useCallback,f=m.useContext,g=m.useEffect,h=m.useImperativeHandle,y=m.useLayoutEffect,C=m.useRef,b=m.useState,v=o("WAWebPREGatingUtils").isPREMessageSendFollowupEnabled()?p.memo(r("WAWebMediaThumb.react")):r("WAWebMediaThumb.react"),S={viewerThumbs:{display:"x78zum5",width:"xh8yej3",overflowX:"x14aock7",$$css:!0},mediaThumb:{position:"x1n2onr6",boxSizing:"x9f619",display:"x78zum5",flex:"x3psx0u",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"x9whnou",minWidth:"xa06r8k",maxWidth:"xr6zewm",height:"xuzvuw4",$$css:!0}};function R(t){var n=t.activeMsg,a=t.highlightedMsgIds,i=t.mediaMsgs,l=t.msgIdToPreferPreview,s=t.onSelectThumb,u=t.onSetActiveThumb,d=t.ref,m=C({}),f=function(){var e=n.id.toString(),t=m.current[e];t&&r("WAWebFocusTracer").focus(t)};h(d,function(){return{focusOnActive:f}});var g=a!=null&&a.size>0&&a.has(n.id.toString()),y=[],b=_(function(e,t){m.current[t]=e},[]),v=i instanceof o("WAWebAllMediaCollection").WAWebAllMediaCollection?i.getMsgsAround(n,50):i;v.forEach(function(t){if(t.mediaData==null){var r=n;o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerFlow: attempted to render a msg without mediaData: ",""])),JSON.stringify({type:t.type,isMedia:o("WAWebMsgGetters").getIsMedia(t),startMsgType:r.type,startMsgIsMedia:o("WAWebMsgGetters").getIsMedia(r)})).verbose();return}var i=g&&a&&!a.has(t.id.toString())?"viewerFlowTransparent":"viewerFlow";y.push(p.jsx(L,{theme:i,active:t===n,msg:t,onClick:s,setThumbRef:b,onSetActiveThumb:u,preferPreview:!!l.get(t.id.toString()),showTooltip:o("WAWebMsgGetters").getIsGroupMsg(t),tabIndex:t===n?0:-1},"media-"+t.id.id))});var R=(c||(c=r("stylex")))(S.mediaThumb,o("WAWebUISpacing").uiMargin.end8);return y.push(p.jsx("div",{className:R,children:i.queryMediaAfter!=null?p.jsx(o("WAWebSpinner.react").Spinner,{stroke:6,size:24}):null},"spinner-right")),y.unshift(p.jsx("div",{className:R,children:i.queryMediaBefore!=null?p.jsx(o("WAWebSpinner.react").Spinner,{stroke:6,size:24}):null},"spinner-left")),y.push(p.jsx("div",{className:"x1mkiy5m"},"padding-right")),y.unshift(p.jsx("div",{className:"x1mkiy5m"},"padding-left")),p.jsx(p.Fragment,{children:y})}R.displayName=R.name+" [from "+i.id+"]";function L(e){var t=e.msg,n=e.preferPreview,r=e.showTooltip,o=e.tabIndex,a=e.onClick,i=e.setThumbRef,l=e.active,s=e.onSetActiveThumb,u=e.theme,c=_(function(){a(t)},[t,a]),d=_(function(e){i(e,t.id.toString()),l===!0&&s(e)},[l,t.id,s,i]);return p.jsx(v,{theme:u,active:l,msg:t,containerRef:d,onClick:c,preferPreview:n,showTooltip:r,tabIndex:o})}L.displayName=L.name+" [from "+i.id+"]";var E=R;function k(e){var t=f(o("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext),n=e.mediaMsgs,a=e.onScroll,i=e.activeMsg,l=e.moveUpAnimation,u=e.moveDownAnimation;T({moveDownAnimation:u,moveUpAnimation:l});var d=C({}),m=C(null),_=C(null),h=r("useWAWebPrevious")(i.id),y=function(){var e;(e=m.current)==null||e.focusOnActive()};g(function(){var e;(e=_.current)!=null&&e.contains(document.activeElement)&&!i.id.equals(h)&&y()},[i,h]);var v=function(t){var e=d.current[t];if(!e)return!1;var n=e.getBoundingClientRect(),r=(n.left+n.right)/2,o=r>-1*window.innerWidth&&r<2*window.innerWidth;return!o},R=function(){var e=new Map;return n.forEach(function(t){var n=t.id.toString();e.set(n,v(n))}),e},L=b(R),k=L[0],I=L[1],D=r("useWAWebThrottledCallback")(function(){var e=R();r("WAMapsShallowEqual")(k,e)||I(e)},100),x=function(t){D(),a(t)},$=t;return p.jsx("div",babelHelpers.extends({},{0:{className:"xsm26vf x10l6tqk x1ey2m1c xoxg7ud x9f619 x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 xh8yej3 xpyat2d x6ikm8r x10wlt62 x13fuv20 x178xt8z xx42vgk xg01cxk xqu7myx"},1:{className:"xsm26vf x10l6tqk x1ey2m1c xoxg7ud x9f619 x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 xh8yej3 xpyat2d x6ikm8r x10wlt62 x13fuv20 x178xt8z xx42vgk xqu7myx x1yn0zye xvdu4fi"}}[!!$<<0],{ref:e.setRefThumbsContainer,children:p.jsx("div",{ref:_,className:"xh8yej3",dir:"ltr",children:p.jsx("div",babelHelpers.extends({role:"list","aria-label":s._(/*BTDS*/"Media list"),onScroll:x},(c||(c=r("stylex"))).props(S.viewerThumbs,o("WAWebUISpacing").uiPadding.vert8),{ref:e.setRefThumbs,children:p.jsx(E,{ref:m,mediaMsgs:n,highlightedMsgIds:e.highlightedMsgIds,activeMsg:e.activeMsg,onSetActiveThumb:e.onSetActiveThumb,onSelectThumb:e.onSelectThumb,msgIdToPreferPreview:k})}))})}))}k.displayName=k.name+" [from "+i.id+"]";var I=200;function T(e){var t=e.moveDownAnimation,n=e.moveUpAnimation,a=f(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx),i=a.hasOverflownThumbnailSection,l=r("useWAWebPrevious")(i),s=C(!1),u=C(!1),c=a.isEnabled,d=a.msgId,m=_(function(){n==null||n(),s.current=!1},[n]),p=_(function(){t==null||t(),s.current=!0},[t]),h=function(){return u.current=!1,window.setTimeout(function(){u.current=!0},I)};g(function(){var e=h();return function(){window.clearTimeout(e)}},[]),y(function(){u.current=!1;var e=h();return s.current&&m(),function(){window.clearTimeout(e)}},[d]),g(function(){!c||!u.current||i===l||(s.current=i,i?p():m())},[a.msgId,i,p,c,t,n,l,m])}l.default=k}),226);